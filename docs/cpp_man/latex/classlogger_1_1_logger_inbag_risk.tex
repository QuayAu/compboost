\hypertarget{classlogger_1_1_logger_inbag_risk}{}\section{logger\+:\+:Logger\+Inbag\+Risk Class Reference}
\label{classlogger_1_1_logger_inbag_risk}\index{logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}}


\mbox{\hyperlink{classlogger_1_1_logger}{Logger}} class to log the inbag risk.  




{\ttfamily \#include $<$logger.\+h$>$}



Inheritance diagram for logger\+:\+:Logger\+Inbag\+Risk\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=205pt]{classlogger_1_1_logger_inbag_risk__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for logger\+:\+:Logger\+Inbag\+Risk\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlogger_1_1_logger_inbag_risk__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_ad6aa28d3140dc547f051a3ccd0cde43d}{Logger\+Inbag\+Risk}} (const bool \&, \mbox{\hyperlink{classloss_1_1_loss}{loss\+::\+Loss}} $\ast$, const double \&)
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_aa7cb90600de663c51feaaf8a0715a0f9}{log\+Step}} (const unsigned int \&, const arma\+::vec \&, const arma\+::vec \&, \mbox{\hyperlink{classblearner_1_1_baselearner}{blearner\+::\+Baselearner}} $\ast$, const double \&, const double \&)
\begin{DoxyCompactList}\small\item\em Log current step of compboost iteration for class {\ttfamily \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk}{Logger\+Inbag\+Risk}}} \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_a48453cfb5a3bbe3b1a73bbcb2d40f49e}{reached\+Stop\+Criteria}} () const
\begin{DoxyCompactList}\small\item\em Stop criteria is fulfilled if the relative improvement falls below {\ttfamily eps\+\_\+for\+\_\+break} \end{DoxyCompactList}\item 
arma\+::vec \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_abde2b1db608804ca90ce92cd0e5dde12}{get\+Logged\+Data}} () const
\begin{DoxyCompactList}\small\item\em Return the data stored within the logger. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_ad5428486e370ae88e3bcb3a6c18d0f44}{clear\+Logger\+Data}} ()
\begin{DoxyCompactList}\small\item\em Clear the logger data. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_a17caab25f28cc05d9170c8ac2d910487}{initialize\+Logger\+Printer}} () const
\begin{DoxyCompactList}\small\item\em Print the head of the trace which is printed to the console. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_a3b7e827e941f2cb4b9def7296a5db38f}{print\+Logger\+Status}} () const
\begin{DoxyCompactList}\small\item\em Print status of current iteration into the console. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classloss_1_1_loss}{loss\+::\+Loss}} $\ast$ \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_abd70a6ddb6701bab59cd3ac01468938b}{used\+\_\+loss}}
\begin{DoxyCompactList}\small\item\em Used loss. {\bfseries Note} that you can specify a different loss than the loss used for training. \end{DoxyCompactList}\item 
std\+::vector$<$ double $>$ \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_a823c1a3de2cc47d8fca047297d374590}{tracked\+\_\+inbag\+\_\+risk}}
\begin{DoxyCompactList}\small\item\em Vector of inbag risk for every iteration. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_a2990493d573d8e57605e4d96e0c0d8bb}{eps\+\_\+for\+\_\+break}}
\begin{DoxyCompactList}\small\item\em Stopping criteria, stop if $(\mathrm{risk}_{i-1} - \mathrm{risk}_i) / \mathrm{risk}_{i-1} < \mathrm{eps\_for\_break}$. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\mbox{\hyperlink{classlogger_1_1_logger}{Logger}} class to log the inbag risk. 

This class loggs the inbag risk for a specific loss function. It is possible to define more than one inbag risk logger (e.\+g. for 2 different loss functions). For details about logging and stopping see the description of the {\ttfamily \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_aa7cb90600de663c51feaaf8a0715a0f9}{log\+Step()}}} function. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlogger_1_1_logger_inbag_risk_ad6aa28d3140dc547f051a3ccd0cde43d}\label{classlogger_1_1_logger_inbag_risk_ad6aa28d3140dc547f051a3ccd0cde43d}} 
\index{logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}!Logger\+Inbag\+Risk@{Logger\+Inbag\+Risk}}
\index{Logger\+Inbag\+Risk@{Logger\+Inbag\+Risk}!logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}}
\subsubsection{\texorpdfstring{Logger\+Inbag\+Risk()}{LoggerInbagRisk()}}
{\footnotesize\ttfamily logger\+::\+Logger\+Inbag\+Risk\+::\+Logger\+Inbag\+Risk (\begin{DoxyParamCaption}\item[{const bool \&}]{is\+\_\+a\+\_\+stopper0,  }\item[{\mbox{\hyperlink{classloss_1_1_loss}{loss\+::\+Loss}} $\ast$}]{used\+\_\+loss,  }\item[{const double \&}]{eps\+\_\+for\+\_\+break }\end{DoxyParamCaption})}



Default constructor. 

Default constructor of class {\ttfamily \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk}{Logger\+Inbag\+Risk}}}


\begin{DoxyParams}{Parameters}
{\em is\+\_\+a\+\_\+stopper0} & {\ttfamily bool} specify if the logger should be used as stopper \\
\hline
{\em used\+\_\+loss} & {\ttfamily Loss$\ast$} used loss to calculate the empirical risk (this can differ from the one used while training the model) \\
\hline
{\em eps\+\_\+for\+\_\+break} & {\ttfamily double} sets value of the stopping criteria\`{} \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlogger_1_1_logger_inbag_risk_ad5428486e370ae88e3bcb3a6c18d0f44}\label{classlogger_1_1_logger_inbag_risk_ad5428486e370ae88e3bcb3a6c18d0f44}} 
\index{logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}!clear\+Logger\+Data@{clear\+Logger\+Data}}
\index{clear\+Logger\+Data@{clear\+Logger\+Data}!logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}}
\subsubsection{\texorpdfstring{clear\+Logger\+Data()}{clearLoggerData()}}
{\footnotesize\ttfamily void logger\+::\+Logger\+Inbag\+Risk\+::clear\+Logger\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Clear the logger data. 

This is an important thing which is called every time in front of retraining the model. If we don\textquotesingle{}t clear the data, the new iterations are just pasted at the end of the existing vectors which couses some troubles. 

Implements \mbox{\hyperlink{classlogger_1_1_logger_a8c68db2430fa84b67528bfa6ae45a516}{logger\+::\+Logger}}.

\mbox{\Hypertarget{classlogger_1_1_logger_inbag_risk_abde2b1db608804ca90ce92cd0e5dde12}\label{classlogger_1_1_logger_inbag_risk_abde2b1db608804ca90ce92cd0e5dde12}} 
\index{logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}!get\+Logged\+Data@{get\+Logged\+Data}}
\index{get\+Logged\+Data@{get\+Logged\+Data}!logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}}
\subsubsection{\texorpdfstring{get\+Logged\+Data()}{getLoggedData()}}
{\footnotesize\ttfamily arma\+::vec logger\+::\+Logger\+Inbag\+Risk\+::get\+Logged\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Return the data stored within the logger. 

Return the data stored within the O\+OB risk logger.

This function returns the logged O\+OB risk.

\begin{DoxyReturn}{Returns}
{\ttfamily arma\+::vec} of elapsed time 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classlogger_1_1_logger_aa4fc254c532172db3404b7c0bcd17092}{logger\+::\+Logger}}.

\mbox{\Hypertarget{classlogger_1_1_logger_inbag_risk_a17caab25f28cc05d9170c8ac2d910487}\label{classlogger_1_1_logger_inbag_risk_a17caab25f28cc05d9170c8ac2d910487}} 
\index{logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}!initialize\+Logger\+Printer@{initialize\+Logger\+Printer}}
\index{initialize\+Logger\+Printer@{initialize\+Logger\+Printer}!logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}}
\subsubsection{\texorpdfstring{initialize\+Logger\+Printer()}{initializeLoggerPrinter()}}
{\footnotesize\ttfamily std\+::string logger\+::\+Logger\+Inbag\+Risk\+::initialize\+Logger\+Printer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Print the head of the trace which is printed to the console. 

\begin{DoxyReturn}{Returns}
{\ttfamily std\+::string} which is used to initialize the header of the trace 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classlogger_1_1_logger_a825f96e8564ac4013ff09ef842c0aeec}{logger\+::\+Logger}}.

\mbox{\Hypertarget{classlogger_1_1_logger_inbag_risk_aa7cb90600de663c51feaaf8a0715a0f9}\label{classlogger_1_1_logger_inbag_risk_aa7cb90600de663c51feaaf8a0715a0f9}} 
\index{logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}!log\+Step@{log\+Step}}
\index{log\+Step@{log\+Step}!logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}}
\subsubsection{\texorpdfstring{log\+Step()}{logStep()}}
{\footnotesize\ttfamily void logger\+::\+Logger\+Inbag\+Risk\+::log\+Step (\begin{DoxyParamCaption}\item[{const unsigned int \&}]{current\+\_\+iteration,  }\item[{const arma\+::vec \&}]{response,  }\item[{const arma\+::vec \&}]{prediction,  }\item[{\mbox{\hyperlink{classblearner_1_1_baselearner}{blearner\+::\+Baselearner}} $\ast$}]{used\+\_\+blearner,  }\item[{const double \&}]{offset,  }\item[{const double \&}]{learning\+\_\+rate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Log current step of compboost iteration for class {\ttfamily \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk}{Logger\+Inbag\+Risk}}} 

This logger computes the risk for the given training data $\mathcal{D}_\mathrm{train} = \{(x_i,\ y_i)\ |\ i \in \{1, \dots, n\}\}$ and stores it into a vector. The empirical risk $\mathcal{R}$ for iteration $m$ is calculated by\+: \[ \mathcal{R}_\mathrm{emp}^{[m]} = \frac{1}{|\mathcal{D}_\mathrm{train}|}\sum\limits_{(x,y) \in \mathcal{D}_\mathrm{train}} L(y, \hat{f}^{[m]}(x)) \]

{\bfseries Note\+:}
\begin{DoxyItemize}
\item If $m=0$ than $\hat{f}$ is just the offset.
\item The implementation to calculate $\mathcal{R}_\mathrm{emp}^{[m]}$ is done in two steps\+:
\begin{DoxyEnumerate}
\item Calculate vector {\ttfamily risk\+\_\+temp} of losses for every observation for given response $y^{(i)}$ and prediction $\hat{f}^{[m]}(x^{(i)})$.
\item Average over {\ttfamily risk\+\_\+temp}.
\end{DoxyEnumerate}

This procedure ensures, that it is possible to e.\+g. use the A\+UC or any arbitrary performance measure for risk logging. This gives just one value for {\ttfamily risk\+\_\+temp} and therefore the average equals the loss function. If this is just a value (like for the A\+UC) then the value is returned.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em current\+\_\+iteration} & {\ttfamily unsigned int} of current iteration \\
\hline
{\em response} & {\ttfamily arma\+::vec} of the given response used for training \\
\hline
{\em prediction} & {\ttfamily arma\+::vec} actual prediction of the boosting model at iteration {\ttfamily current\+\_\+iteration} \\
\hline
{\em used\+\_\+blearner} & {\ttfamily Baselearner$\ast$} pointer to the selected baselearner in iteration {\ttfamily current\+\_\+iteration} \\
\hline
{\em offset} & {\ttfamily double} of the overall offset of the training \\
\hline
{\em learning\+\_\+rate} & {\ttfamily double} lerning rate of the {\ttfamily current\+\_\+iteration} \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classlogger_1_1_logger_a91d987a86698e455b6fd3468f266d3fe}{logger\+::\+Logger}}.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlogger_1_1_logger_inbag_risk_aa7cb90600de663c51feaaf8a0715a0f9_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlogger_1_1_logger_inbag_risk_a3b7e827e941f2cb4b9def7296a5db38f}\label{classlogger_1_1_logger_inbag_risk_a3b7e827e941f2cb4b9def7296a5db38f}} 
\index{logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}!print\+Logger\+Status@{print\+Logger\+Status}}
\index{print\+Logger\+Status@{print\+Logger\+Status}!logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}}
\subsubsection{\texorpdfstring{print\+Logger\+Status()}{printLoggerStatus()}}
{\footnotesize\ttfamily std\+::string logger\+::\+Logger\+Inbag\+Risk\+::print\+Logger\+Status (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Print status of current iteration into the console. 

The string which is created in this functions must have exactly the same length as the string from {\ttfamily \mbox{\hyperlink{classlogger_1_1_logger_inbag_risk_a17caab25f28cc05d9170c8ac2d910487}{initialize\+Logger\+Printer()}}}. Those strings are printed line by line.

\begin{DoxyReturn}{Returns}
{\ttfamily std\+::string} which includes the log of the current iteration 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classlogger_1_1_logger_abad818a7e8053ca84cb267e883b5e377}{logger\+::\+Logger}}.

\mbox{\Hypertarget{classlogger_1_1_logger_inbag_risk_a48453cfb5a3bbe3b1a73bbcb2d40f49e}\label{classlogger_1_1_logger_inbag_risk_a48453cfb5a3bbe3b1a73bbcb2d40f49e}} 
\index{logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}!reached\+Stop\+Criteria@{reached\+Stop\+Criteria}}
\index{reached\+Stop\+Criteria@{reached\+Stop\+Criteria}!logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}}
\subsubsection{\texorpdfstring{reached\+Stop\+Criteria()}{reachedStopCriteria()}}
{\footnotesize\ttfamily bool logger\+::\+Logger\+Inbag\+Risk\+::reached\+Stop\+Criteria (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Stop criteria is fulfilled if the relative improvement falls below {\ttfamily eps\+\_\+for\+\_\+break} 

The stopping criteria is fulfilled, if the relative improvement at the current iteration $m$ $\varepsilon^{[m]}$ falls under a fixed boundary $\varepsilon$. Where the relative improvement is defined by \[ \varepsilon^{[m]} = \frac{\mathcal{R}_\mathrm{emp}^{[m-1]} - \mathcal{R}_\mathrm{emp}^{[m]}}{\mathcal{R}_\mathrm{emp}^{[m-1]}}. \]

The logger stops the algorithm if $\varepsilon^{[m]} \leq \varepsilon$.

\begin{DoxyReturn}{Returns}
{\ttfamily bool} which tells if the stopping criteria is reached or not (if the logger isn\textquotesingle{}t a stopper then this is always false) 
\end{DoxyReturn}


Implements \mbox{\hyperlink{classlogger_1_1_logger_aed91421c07062b91cee158ef2bda7ae8}{logger\+::\+Logger}}.



\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlogger_1_1_logger_inbag_risk_a2990493d573d8e57605e4d96e0c0d8bb}\label{classlogger_1_1_logger_inbag_risk_a2990493d573d8e57605e4d96e0c0d8bb}} 
\index{logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}!eps\+\_\+for\+\_\+break@{eps\+\_\+for\+\_\+break}}
\index{eps\+\_\+for\+\_\+break@{eps\+\_\+for\+\_\+break}!logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}}
\subsubsection{\texorpdfstring{eps\+\_\+for\+\_\+break}{eps\_for\_break}}
{\footnotesize\ttfamily double logger\+::\+Logger\+Inbag\+Risk\+::eps\+\_\+for\+\_\+break\hspace{0.3cm}{\ttfamily [private]}}



Stopping criteria, stop if $(\mathrm{risk}_{i-1} - \mathrm{risk}_i) / \mathrm{risk}_{i-1} < \mathrm{eps\_for\_break}$. 

\mbox{\Hypertarget{classlogger_1_1_logger_inbag_risk_a823c1a3de2cc47d8fca047297d374590}\label{classlogger_1_1_logger_inbag_risk_a823c1a3de2cc47d8fca047297d374590}} 
\index{logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}!tracked\+\_\+inbag\+\_\+risk@{tracked\+\_\+inbag\+\_\+risk}}
\index{tracked\+\_\+inbag\+\_\+risk@{tracked\+\_\+inbag\+\_\+risk}!logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}}
\subsubsection{\texorpdfstring{tracked\+\_\+inbag\+\_\+risk}{tracked\_inbag\_risk}}
{\footnotesize\ttfamily std\+::vector$<$double$>$ logger\+::\+Logger\+Inbag\+Risk\+::tracked\+\_\+inbag\+\_\+risk\hspace{0.3cm}{\ttfamily [private]}}



Vector of inbag risk for every iteration. 

\mbox{\Hypertarget{classlogger_1_1_logger_inbag_risk_abd70a6ddb6701bab59cd3ac01468938b}\label{classlogger_1_1_logger_inbag_risk_abd70a6ddb6701bab59cd3ac01468938b}} 
\index{logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}!used\+\_\+loss@{used\+\_\+loss}}
\index{used\+\_\+loss@{used\+\_\+loss}!logger\+::\+Logger\+Inbag\+Risk@{logger\+::\+Logger\+Inbag\+Risk}}
\subsubsection{\texorpdfstring{used\+\_\+loss}{used\_loss}}
{\footnotesize\ttfamily \mbox{\hyperlink{classloss_1_1_loss}{loss\+::\+Loss}}$\ast$ logger\+::\+Logger\+Inbag\+Risk\+::used\+\_\+loss\hspace{0.3cm}{\ttfamily [private]}}



Used loss. {\bfseries Note} that you can specify a different loss than the loss used for training. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
C\+:/\+Users/schal/\+One\+Drive/github\+\_\+repos/compboost/src/\mbox{\hyperlink{logger_8h}{logger.\+h}}\item 
C\+:/\+Users/schal/\+One\+Drive/github\+\_\+repos/compboost/src/\mbox{\hyperlink{logger_8cpp}{logger.\+cpp}}\end{DoxyCompactItemize}
