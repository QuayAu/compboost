\hypertarget{classlogger_1_1_inbag_risk_logger}{}\section{logger\+:\+:Inbag\+Risk\+Logger Class Reference}
\label{classlogger_1_1_inbag_risk_logger}\index{logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}}


\hyperlink{classlogger_1_1_logger}{Logger} class to log the inbag risk.  




{\ttfamily \#include $<$logger.\+h$>$}



Inheritance diagram for logger\+:\+:Inbag\+Risk\+Logger\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=205pt]{classlogger_1_1_inbag_risk_logger__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for logger\+:\+:Inbag\+Risk\+Logger\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlogger_1_1_inbag_risk_logger__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classlogger_1_1_inbag_risk_logger_aab67656c1530f20c29ffed3d54ef8fce}{Inbag\+Risk\+Logger} (const bool \&, \hyperlink{classloss_1_1_loss}{loss\+::\+Loss} $\ast$, const double \&)
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
void \hyperlink{classlogger_1_1_inbag_risk_logger_ad90612e1b684287a29bdbde1077d65d7}{log\+Step} (const unsigned int \&, const arma\+::vec \&, const arma\+::vec \&, \hyperlink{classblearner_1_1_baselearner}{blearner\+::\+Baselearner} $\ast$, const double \&, const double \&)
\begin{DoxyCompactList}\small\item\em Log current step of compboost iteration for class {\ttfamily \hyperlink{classlogger_1_1_inbag_risk_logger}{Inbag\+Risk\+Logger}} \end{DoxyCompactList}\item 
bool \hyperlink{classlogger_1_1_inbag_risk_logger_a17a7416e4cc9db4da3b3eda5012ad7c7}{reached\+Stop\+Criteria} () const
\begin{DoxyCompactList}\small\item\em Stop criteria is fulfilled if the relative improvement falls below {\ttfamily eps\+\_\+for\+\_\+break} \end{DoxyCompactList}\item 
arma\+::vec \hyperlink{classlogger_1_1_inbag_risk_logger_af69f22c25521341a26152692bd03183a}{get\+Logged\+Data} () const
\begin{DoxyCompactList}\small\item\em Return the data stored within the logger. \end{DoxyCompactList}\item 
void \hyperlink{classlogger_1_1_inbag_risk_logger_aecdde2764203ec24ca360846538ce3c6}{clear\+Logger\+Data} ()
\begin{DoxyCompactList}\small\item\em Clear the logger data. \end{DoxyCompactList}\item 
std\+::string \hyperlink{classlogger_1_1_inbag_risk_logger_ab793454f28dae8d0901852b41a910ec7}{initialize\+Logger\+Printer} () const
\begin{DoxyCompactList}\small\item\em Print the head of the trace which is printed to the console. \end{DoxyCompactList}\item 
std\+::string \hyperlink{classlogger_1_1_inbag_risk_logger_a040213adf29a645f0fd5356b951627d0}{print\+Logger\+Status} () const
\begin{DoxyCompactList}\small\item\em Print status of current iteration into the console. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classloss_1_1_loss}{loss\+::\+Loss} $\ast$ \hyperlink{classlogger_1_1_inbag_risk_logger_afee746bf4009661f930ea8294e7f72fc}{used\+\_\+loss}
\begin{DoxyCompactList}\small\item\em Used loss. {\bfseries Note} that you can specify a different loss than the loss used for training. \end{DoxyCompactList}\item 
std\+::vector$<$ double $>$ \hyperlink{classlogger_1_1_inbag_risk_logger_aed427deee828fd480e5fa9536360b16b}{tracked\+\_\+inbag\+\_\+risk}
\begin{DoxyCompactList}\small\item\em Vector of inbag risk for every iteration. \end{DoxyCompactList}\item 
double \hyperlink{classlogger_1_1_inbag_risk_logger_a1890b49b8ffe85e1bc65b4f8ab7999fe}{eps\+\_\+for\+\_\+break}
\begin{DoxyCompactList}\small\item\em Stopping criteria, stop if $(\mathrm{risk}_{i-1} - \mathrm{risk}_i) / \mathrm{risk}_{i-1} < \mathrm{eps\_for\_break}$. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\hyperlink{classlogger_1_1_logger}{Logger} class to log the inbag risk. 

This class loggs the inbag risk for a specific loss function. It is possible to define more than one inbag risk logger (e.\+g. for 2 different loss functions). For details about logging and stopping see the description of the {\ttfamily \hyperlink{classlogger_1_1_inbag_risk_logger_ad90612e1b684287a29bdbde1077d65d7}{log\+Step()}} function. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classlogger_1_1_inbag_risk_logger_aab67656c1530f20c29ffed3d54ef8fce}\label{classlogger_1_1_inbag_risk_logger_aab67656c1530f20c29ffed3d54ef8fce}} 
\index{logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}!Inbag\+Risk\+Logger@{Inbag\+Risk\+Logger}}
\index{Inbag\+Risk\+Logger@{Inbag\+Risk\+Logger}!logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}}
\subsubsection{\texorpdfstring{Inbag\+Risk\+Logger()}{InbagRiskLogger()}}
{\footnotesize\ttfamily logger\+::\+Inbag\+Risk\+Logger\+::\+Inbag\+Risk\+Logger (\begin{DoxyParamCaption}\item[{const bool \&}]{is\+\_\+a\+\_\+stopper0,  }\item[{\hyperlink{classloss_1_1_loss}{loss\+::\+Loss} $\ast$}]{used\+\_\+loss,  }\item[{const double \&}]{eps\+\_\+for\+\_\+break }\end{DoxyParamCaption})}



Default constructor. 

Default constructor of class {\ttfamily \hyperlink{classlogger_1_1_inbag_risk_logger}{Inbag\+Risk\+Logger}}


\begin{DoxyParams}{Parameters}
{\em is\+\_\+a\+\_\+stopper0} & {\ttfamily bool} specify if the logger should be used as stopper \\
\hline
{\em used\+\_\+loss} & {\ttfamily Loss$\ast$} used loss to calculate the empirical risk (this can differ from the one used while training the model) \\
\hline
{\em eps\+\_\+for\+\_\+break} & {\ttfamily double} sets value of the stopping criteria` \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classlogger_1_1_inbag_risk_logger_aecdde2764203ec24ca360846538ce3c6}\label{classlogger_1_1_inbag_risk_logger_aecdde2764203ec24ca360846538ce3c6}} 
\index{logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}!clear\+Logger\+Data@{clear\+Logger\+Data}}
\index{clear\+Logger\+Data@{clear\+Logger\+Data}!logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}}
\subsubsection{\texorpdfstring{clear\+Logger\+Data()}{clearLoggerData()}}
{\footnotesize\ttfamily void logger\+::\+Inbag\+Risk\+Logger\+::clear\+Logger\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Clear the logger data. 

This is an important thing which is called every time in front of retraining the model. If we don\textquotesingle{}t clear the data, the new iterations are just pasted at the end of the existing vectors which couses some troubles. 

Implements \hyperlink{classlogger_1_1_logger_a8c68db2430fa84b67528bfa6ae45a516}{logger\+::\+Logger}.

\mbox{\Hypertarget{classlogger_1_1_inbag_risk_logger_af69f22c25521341a26152692bd03183a}\label{classlogger_1_1_inbag_risk_logger_af69f22c25521341a26152692bd03183a}} 
\index{logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}!get\+Logged\+Data@{get\+Logged\+Data}}
\index{get\+Logged\+Data@{get\+Logged\+Data}!logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}}
\subsubsection{\texorpdfstring{get\+Logged\+Data()}{getLoggedData()}}
{\footnotesize\ttfamily arma\+::vec logger\+::\+Inbag\+Risk\+Logger\+::get\+Logged\+Data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Return the data stored within the logger. 

Return the data stored within the O\+OB risk logger.

This function returns the logged O\+OB risk.

\begin{DoxyReturn}{Returns}
{\ttfamily arma\+::vec} of elapsed time 
\end{DoxyReturn}


Implements \hyperlink{classlogger_1_1_logger_aa4fc254c532172db3404b7c0bcd17092}{logger\+::\+Logger}.

\mbox{\Hypertarget{classlogger_1_1_inbag_risk_logger_ab793454f28dae8d0901852b41a910ec7}\label{classlogger_1_1_inbag_risk_logger_ab793454f28dae8d0901852b41a910ec7}} 
\index{logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}!initialize\+Logger\+Printer@{initialize\+Logger\+Printer}}
\index{initialize\+Logger\+Printer@{initialize\+Logger\+Printer}!logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}}
\subsubsection{\texorpdfstring{initialize\+Logger\+Printer()}{initializeLoggerPrinter()}}
{\footnotesize\ttfamily std\+::string logger\+::\+Inbag\+Risk\+Logger\+::initialize\+Logger\+Printer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Print the head of the trace which is printed to the console. 

\begin{DoxyReturn}{Returns}
{\ttfamily std\+::string} which is used to initialize the header of the trace 
\end{DoxyReturn}


Implements \hyperlink{classlogger_1_1_logger_a825f96e8564ac4013ff09ef842c0aeec}{logger\+::\+Logger}.

\mbox{\Hypertarget{classlogger_1_1_inbag_risk_logger_ad90612e1b684287a29bdbde1077d65d7}\label{classlogger_1_1_inbag_risk_logger_ad90612e1b684287a29bdbde1077d65d7}} 
\index{logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}!log\+Step@{log\+Step}}
\index{log\+Step@{log\+Step}!logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}}
\subsubsection{\texorpdfstring{log\+Step()}{logStep()}}
{\footnotesize\ttfamily void logger\+::\+Inbag\+Risk\+Logger\+::log\+Step (\begin{DoxyParamCaption}\item[{const unsigned int \&}]{current\+\_\+iteration,  }\item[{const arma\+::vec \&}]{response,  }\item[{const arma\+::vec \&}]{prediction,  }\item[{\hyperlink{classblearner_1_1_baselearner}{blearner\+::\+Baselearner} $\ast$}]{used\+\_\+blearner,  }\item[{const double \&}]{offset,  }\item[{const double \&}]{learning\+\_\+rate }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Log current step of compboost iteration for class {\ttfamily \hyperlink{classlogger_1_1_inbag_risk_logger}{Inbag\+Risk\+Logger}} 

This logger computes the risk for the given training data $\mathcal{D}_\mathrm{train} = \{(x_i,\ y_i)\ |\ i \in \{1, \dots, n\}\}$ and stores it into a vector. The empirical risk $\mathcal{R}$ for iteration $m$ is calculated by\+: \[ \mathcal{R}_\mathrm{emp}^{[m]} = \frac{1}{|\mathcal{D}_\mathrm{train}|}\sum\limits_{(x,y) \in \mathcal{D}_\mathrm{train}} L(y, \hat{f}^{[m]}(x)) \]

{\bfseries Note\+:}
\begin{DoxyItemize}
\item If $m=0$ than $\hat{f}$ is just the offset.
\item The implementation to calculate $\mathcal{R}_\mathrm{emp}^{[m]}$ is done in two steps\+:
\begin{DoxyEnumerate}
\item Calculate vector {\ttfamily risk\+\_\+temp} of losses for every observation for given response $y^{(i)}$ and prediction $\hat{f}^{[m]}(x^{(i)})$.
\item Average over {\ttfamily risk\+\_\+temp}.
\end{DoxyEnumerate}

This procedure ensures, that it is possible to e.\+g. use the A\+UC or any arbitrary performance measure for risk logging. This gives just one value for {\ttfamily risk\+\_\+temp} and therefore the average equals the loss function. If this is just a value (like for the A\+UC) then the value is returned.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em current\+\_\+iteration} & {\ttfamily unsigned int} of current iteration \\
\hline
{\em response} & {\ttfamily arma\+::vec} of the given response used for training \\
\hline
{\em prediction} & {\ttfamily arma\+::vec} actual prediction of the boosting model at iteration {\ttfamily current\+\_\+iteration} \\
\hline
{\em used\+\_\+blearner} & {\ttfamily Baselearner$\ast$} pointer to the selected baselearner in iteration {\ttfamily current\+\_\+iteration} \\
\hline
{\em offset} & {\ttfamily double} of the overall offset of the training \\
\hline
{\em learning\+\_\+rate} & {\ttfamily double} lerning rate of the {\ttfamily current\+\_\+iteration} \\
\hline
\end{DoxyParams}


Implements \hyperlink{classlogger_1_1_logger_a91d987a86698e455b6fd3468f266d3fe}{logger\+::\+Logger}.

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classlogger_1_1_inbag_risk_logger_ad90612e1b684287a29bdbde1077d65d7_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classlogger_1_1_inbag_risk_logger_a040213adf29a645f0fd5356b951627d0}\label{classlogger_1_1_inbag_risk_logger_a040213adf29a645f0fd5356b951627d0}} 
\index{logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}!print\+Logger\+Status@{print\+Logger\+Status}}
\index{print\+Logger\+Status@{print\+Logger\+Status}!logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}}
\subsubsection{\texorpdfstring{print\+Logger\+Status()}{printLoggerStatus()}}
{\footnotesize\ttfamily std\+::string logger\+::\+Inbag\+Risk\+Logger\+::print\+Logger\+Status (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Print status of current iteration into the console. 

The string which is created in this functions must have exactly the same length as the string from {\ttfamily \hyperlink{classlogger_1_1_inbag_risk_logger_ab793454f28dae8d0901852b41a910ec7}{initialize\+Logger\+Printer()}}. Those strings are printed line by line.

\begin{DoxyReturn}{Returns}
{\ttfamily std\+::string} which includes the log of the current iteration 
\end{DoxyReturn}


Implements \hyperlink{classlogger_1_1_logger_abad818a7e8053ca84cb267e883b5e377}{logger\+::\+Logger}.

\mbox{\Hypertarget{classlogger_1_1_inbag_risk_logger_a17a7416e4cc9db4da3b3eda5012ad7c7}\label{classlogger_1_1_inbag_risk_logger_a17a7416e4cc9db4da3b3eda5012ad7c7}} 
\index{logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}!reached\+Stop\+Criteria@{reached\+Stop\+Criteria}}
\index{reached\+Stop\+Criteria@{reached\+Stop\+Criteria}!logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}}
\subsubsection{\texorpdfstring{reached\+Stop\+Criteria()}{reachedStopCriteria()}}
{\footnotesize\ttfamily bool logger\+::\+Inbag\+Risk\+Logger\+::reached\+Stop\+Criteria (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}



Stop criteria is fulfilled if the relative improvement falls below {\ttfamily eps\+\_\+for\+\_\+break} 

The stopping criteria is fulfilled, if the relative improvement at the current iteration $m$ $\varepsilon^{[m]}$ falls under a fixed boundary $\varepsilon$. Where the relative improvement is defined by \[ \varepsilon^{[m]} = \frac{\mathcal{R}_\mathrm{emp}^{[m-1]} - \mathcal{R}_\mathrm{emp}^{[m]}}{\mathcal{R}_\mathrm{emp}^{[m-1]}}. \]

The logger stops the algorithm if $\varepsilon^{[m]} \leq \varepsilon$.

\begin{DoxyReturn}{Returns}
{\ttfamily bool} which tells if the stopping criteria is reached or not (if the logger isn\textquotesingle{}t a stopper then this is always false) 
\end{DoxyReturn}


Implements \hyperlink{classlogger_1_1_logger_aed91421c07062b91cee158ef2bda7ae8}{logger\+::\+Logger}.



\subsection{Member Data Documentation}
\mbox{\Hypertarget{classlogger_1_1_inbag_risk_logger_a1890b49b8ffe85e1bc65b4f8ab7999fe}\label{classlogger_1_1_inbag_risk_logger_a1890b49b8ffe85e1bc65b4f8ab7999fe}} 
\index{logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}!eps\+\_\+for\+\_\+break@{eps\+\_\+for\+\_\+break}}
\index{eps\+\_\+for\+\_\+break@{eps\+\_\+for\+\_\+break}!logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}}
\subsubsection{\texorpdfstring{eps\+\_\+for\+\_\+break}{eps\_for\_break}}
{\footnotesize\ttfamily double logger\+::\+Inbag\+Risk\+Logger\+::eps\+\_\+for\+\_\+break\hspace{0.3cm}{\ttfamily [private]}}



Stopping criteria, stop if $(\mathrm{risk}_{i-1} - \mathrm{risk}_i) / \mathrm{risk}_{i-1} < \mathrm{eps\_for\_break}$. 

\mbox{\Hypertarget{classlogger_1_1_inbag_risk_logger_aed427deee828fd480e5fa9536360b16b}\label{classlogger_1_1_inbag_risk_logger_aed427deee828fd480e5fa9536360b16b}} 
\index{logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}!tracked\+\_\+inbag\+\_\+risk@{tracked\+\_\+inbag\+\_\+risk}}
\index{tracked\+\_\+inbag\+\_\+risk@{tracked\+\_\+inbag\+\_\+risk}!logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}}
\subsubsection{\texorpdfstring{tracked\+\_\+inbag\+\_\+risk}{tracked\_inbag\_risk}}
{\footnotesize\ttfamily std\+::vector$<$double$>$ logger\+::\+Inbag\+Risk\+Logger\+::tracked\+\_\+inbag\+\_\+risk\hspace{0.3cm}{\ttfamily [private]}}



Vector of inbag risk for every iteration. 

\mbox{\Hypertarget{classlogger_1_1_inbag_risk_logger_afee746bf4009661f930ea8294e7f72fc}\label{classlogger_1_1_inbag_risk_logger_afee746bf4009661f930ea8294e7f72fc}} 
\index{logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}!used\+\_\+loss@{used\+\_\+loss}}
\index{used\+\_\+loss@{used\+\_\+loss}!logger\+::\+Inbag\+Risk\+Logger@{logger\+::\+Inbag\+Risk\+Logger}}
\subsubsection{\texorpdfstring{used\+\_\+loss}{used\_loss}}
{\footnotesize\ttfamily \hyperlink{classloss_1_1_loss}{loss\+::\+Loss}$\ast$ logger\+::\+Inbag\+Risk\+Logger\+::used\+\_\+loss\hspace{0.3cm}{\ttfamily [private]}}



Used loss. {\bfseries Note} that you can specify a different loss than the loss used for training. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/daniel/github\+\_\+repos/compboost/src/\hyperlink{logger_8h}{logger.\+h}\item 
/home/daniel/github\+\_\+repos/compboost/src/\hyperlink{logger_8cpp}{logger.\+cpp}\end{DoxyCompactItemize}
